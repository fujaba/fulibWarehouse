<!-- Bootstrap CSS -->
<link rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous">

<script>
    function handler (response) {
        console.log(response);
        document.documentElement.innerHTML = response;
    }

    function submit(cmd) {
        if (cmd) {
            const words = cmd.split(' ');
            // collect actual parameters
            var request = {};
            request['_cmd'] = words[0];

            for (var i = 1; i < words.length - 1; i++) {
                const divElem = document.getElementById(words[i]);
                const subDiv = divElem.getElementsByTagName('div')[0];
                const inputElem = subDiv.getElementsByTagName('input')[0];
                const value = inputElem.value;
                request[words[i]] = value;
            }
            request['_newPage'] = words[words.length-1];
            const requestString = JSON.stringify(request);
            const httpRequest = new XMLHttpRequest();
            httpRequest.overrideMimeType('application/json');
            httpRequest.addEventListener('load', function() {
                handler(this.responseText);
            });
            httpRequest.open('POST', '/cmd', true);
            httpRequest.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
            httpRequest.send(requestString);
        }
    }
</script>

<div id='thePanel'>
</div>

<script>
    const thePanel = document.getElementById('thePanel');
    const stepList = [
/* step03.html */
`<div id='fork-lift-guide' class='container'>
    <div class='row justify-content-center'>
		<div class='col col-lg-2 text-center' style='margin: 1rem'>Fork Lift Guide</div>
    </div>
	<div id='add-supply-page' >
	    <div class='row justify-content-center'>
			<div class='col col-lg-2 text-center' style='margin: 1rem'>New Supply</div>
			<div class='col col-lg-2 text-center'><button onclick='submit("Store Palettes")' style='margin: 1rem'>Store Palettes</button></div>
	    </div>
		<div id='pal-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='palette id?' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='product-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='product?' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='items-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='number of items?' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='add-palette-button' >
		    <div class='row justify-content-center'>
				<div class='col col-lg-2 text-center'><button onclick='submit("submit('add-palette pal-in product-in items-in')")' style='margin: 1rem'>submit</button></div>
		    </div>
		</div>
		<div id='pal-line1' >
		    <div class='row justify-content-center'>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>eu42</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>Sneakers</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>42</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>Place</div>
		    </div>
		</div>
	</div>
</div>
`,
/* step04.html */
`<div id='fork-lift-guide' class='container'>
    <div class='row justify-content-center'>
		<div class='col col-lg-2 text-center' style='margin: 1rem'>Fork Lift Guide</div>
    </div>
	<div id='add-supply-page' >
	    <div class='row justify-content-center'>
			<div class='col col-lg-2 text-center' style='margin: 1rem'>New Supply</div>
			<div class='col col-lg-2 text-center'><button onclick='submit("Store Palettes")' style='margin: 1rem'>Store Palettes</button></div>
	    </div>
		<div id='pal-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='palette id?' value='eu500' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='product-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='product?' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='items-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='number of items?' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='add-palette-button' >
		    <div class='row justify-content-center'>
				<div class='col col-lg-2 text-center'><button onclick='submit("submit('add-palette pal-in product-in items-in')")' style='margin: 1rem'>submit</button></div>
		    </div>
		</div>
		<div id='pal-line1' >
		    <div class='row justify-content-center'>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>eu42</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>Sneakers</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>42</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>Place</div>
		    </div>
		</div>
	</div>
</div>
`,
/* step05.html */
`<div id='fork-lift-guide' class='container'>
    <div class='row justify-content-center'>
		<div class='col col-lg-2 text-center' style='margin: 1rem'>Fork Lift Guide</div>
    </div>
	<div id='add-supply-page' >
	    <div class='row justify-content-center'>
			<div class='col col-lg-2 text-center' style='margin: 1rem'>New Supply</div>
			<div class='col col-lg-2 text-center'><button onclick='submit("Store Palettes")' style='margin: 1rem'>Store Palettes</button></div>
	    </div>
		<div id='pal-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='palette id?' value='eu500' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='product-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='product?' value='Sneakers' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='items-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='number of items?' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='add-palette-button' >
		    <div class='row justify-content-center'>
				<div class='col col-lg-2 text-center'><button onclick='submit("submit('add-palette pal-in product-in items-in')")' style='margin: 1rem'>submit</button></div>
		    </div>
		</div>
		<div id='pal-line1' >
		    <div class='row justify-content-center'>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>eu42</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>Sneakers</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>42</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>Place</div>
		    </div>
		</div>
	</div>
</div>
`,
/* step06.html */
`<div id='fork-lift-guide' class='container'>
    <div class='row justify-content-center'>
		<div class='col col-lg-2 text-center' style='margin: 1rem'>Fork Lift Guide</div>
    </div>
	<div id='add-supply-page' >
	    <div class='row justify-content-center'>
			<div class='col col-lg-2 text-center' style='margin: 1rem'>New Supply</div>
			<div class='col col-lg-2 text-center'><button onclick='submit("Store Palettes")' style='margin: 1rem'>Store Palettes</button></div>
	    </div>
		<div id='pal-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='palette id?' value='eu500' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='product-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='product?' value='Sneakers' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='items-in' >
		    <div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='number of items?' value='50' style='margin: 1rem'></input>
		    </div>
		</div>
		<div id='add-palette-button' >
		    <div class='row justify-content-center'>
				<div class='col col-lg-2 text-center'><button onclick='submit("submit('add-palette pal-in product-in items-in')")' style='margin: 1rem'>submit</button></div>
		    </div>
		</div>
		<div id='pal-line1' >
		    <div class='row justify-content-center'>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>eu42</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>Sneakers</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>42</div>
				<div class='col col-lg-2 text-center' style='margin: 1rem'>Place</div>
		    </div>
		</div>
	</div>
</div>
`,
/* step07.html */
`<!-- Bootstrap CSS -->
<link rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous">
<div id='ForkLiftGuide' class='container'>
	<div class='row justify-content-center'>
		<div class='col col-lg-2 text-center' style='margin: 1rem'>Fork Lift Guide</div>
	</div>
	<div id='addSupplyPage' >
		<div class='row justify-content-center'>
			<div class='col col-lg-2 text-center' style='margin: 1rem'>New Supply</div>
			<div class='col col-lg-2 text-center'><button onclick='submit()' style='margin: 1rem'>Overview</button></div>
		</div>
		<div id='pIdIn' >
			<div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='palette id?' value='eu100' style='margin: 1rem'></input>
			</div>
		</div>
		<div id='productIn' >
			<div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='product?' value='Sneakers' style='margin: 1rem'></input>
			</div>
		</div>
		<div id='itemsIn' >
			<div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='number of items?' value='50' style='margin: 1rem'></input>
			</div>
		</div>
		<div id='placeIn' >
			<div class='row justify-content-center'>
				<input class='col col-lg-2 text-center' placeholder='place?' value='f2' style='margin: 1rem'></input>
			</div>
		</div>
		<div id='addPaletteButton' >
			<div class='row justify-content-center'>
				<div class='col col-lg-2 text-center'><button onclick='submit()' style='margin: 1rem'>submit</button></div>
			</div>
		</div>
	</div>
</div>
`,
/* end */
`<h2 class='row justify-content-center' style='margin: 1rem'>The End</h2>
`
    ];
    var stepCount = 0;
    
    thePanel.innerHTML = stepList[stepCount];
    thePanel.onclick = nextStep;
    
    function nextStep(event) {
        if (event && (event.ctrlKey || event.shiftKey)) {
            if (stepCount > 0) {
                stepCount--;
                thePanel.innerHTML = stepList[stepCount];
            }
        } else if (stepCount + 1 < stepList.length) {
            stepCount++;
            thePanel.innerHTML = stepList[stepCount];
        }
    }
</script>
